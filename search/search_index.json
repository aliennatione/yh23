{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Smart Bar Cortex Documentation","text":"<p>Welcome to the documentation for the Smart Bar AI-Infra project.</p>"},{"location":"#overview","title":"Overview","text":"<p>This project manages the deployment of a YunoHost ecosystem including: - Forgejo (Git) - Node-RED (Logic/AI) - Trilium (Notes/Wiki) - ... and more.</p>"},{"location":"#navigation","title":"Navigation","text":"<ul> <li>Architecture: Technical deep dive.</li> <li>Manual Steps: Things Ansible can't do yet.</li> </ul>"},{"location":"AI_INTEGRATION/","title":"AI Integration Guide","text":"<p>The Smart Bar Cortex now features a dual-mode AI Gateway powered by Google Gemini (Free Tier). This allows both business operators and technical developers to interact with the system using natural language.</p>"},{"location":"AI_INTEGRATION/#the-ai-gateway","title":"\ud83e\udde0 The AI Gateway","text":"<p>The gateway is a Node-RED flow (<code>ai_gateway.json</code>) that exposes two REST endpoints.</p>"},{"location":"AI_INTEGRATION/#api-key-setup","title":"API Key Setup","text":"<p>[!IMPORTANT] You must provide a Google Gemini API Key. 1.  Get a key from Google AI Studio. 2.  Add it to Node-RED's environment variables or edit the <code>Prepare Gemini Request</code> node in the flow editor.     *   Recommended: Add <code>GEMINI_API_KEY=your_key</code> to <code>/etc/systemd/system/nodered.service.d/override.conf</code> (requires manual admin step).</p>"},{"location":"AI_INTEGRATION/#usage-modes","title":"\ud83d\udc65 Usage Modes","text":""},{"location":"AI_INTEGRATION/#1-operator-mode","title":"1. Operator Mode","text":"<ul> <li>Target Users: Bartenders, Managers.</li> <li>Endpoint: <code>/api/ai/operator</code> (POST)</li> <li>Context: Helpful assistant, focuses on inventory (Grocy), relations (Monica), and orders (Dolibarr).</li> <li>Example:     <code>bash     curl -X POST http://brain.bar.lan/api/ai/operator -d '{\"prompt\": \"How do I add a new customer to the loyalty program?\"}'</code></li> </ul>"},{"location":"AI_INTEGRATION/#2-developer-mode","title":"2. Developer Mode","text":"<ul> <li>Target Users: DevOps, Sysadmins.</li> <li>Endpoint: <code>/api/ai/dev</code> (POST)</li> <li>Context: Technical expert, understands Ansible, Linux logs, and JSON.</li> <li>Example:     <code>bash     curl -X POST http://brain.bar.lan/api/ai/dev -d '{\"prompt\": \"Explain the backup strategy in site.yml\"}'</code></li> </ul>"},{"location":"AI_INTEGRATION/#switching-providers","title":"\ud83d\udd04 Switching Providers","text":"<p>Currently configured for Google Gemini 1.5 Flash. To switch to OpenAI/Ollama, edit the <code>Prepare Gemini Request</code> node in Node-RED to change the API URL and payload format.</p>"},{"location":"AI_INTEGRATION_IT/","title":"Guida Integrazione AI","text":"<p>Il Smart Bar Cortex ora include un Gateway AI dual-mode alimentato da Google Gemini (Free Tier). Questo permette sia agli operatori business che agli sviluppatori tecnici di interagire con il sistema usando linguaggio naturale.</p>"},{"location":"AI_INTEGRATION_IT/#il-gateway-ai","title":"\ud83e\udde0 Il Gateway AI","text":"<p>Il gateway \u00e8 un flusso Node-RED (<code>ai_gateway.json</code>) che espone due endpoint REST.</p>"},{"location":"AI_INTEGRATION_IT/#configurazione-chiave-api","title":"Configurazione Chiave API","text":"<p>[!IMPORTANT] Devi fornire una Google Gemini API Key. 1.  Ottieni una chiave da Google AI Studio. 2.  Aggiungila alle variabili d'ambiente di Node-RED o modifica il nodo <code>Prepare Gemini Request</code> nell'editor del flusso.     *   Raccomandato: Aggiungi <code>GEMINI_API_KEY=tua_chiave</code> a <code>/etc/systemd/system/nodered.service.d/override.conf</code> (richiede passaggio admin manuale).</p>"},{"location":"AI_INTEGRATION_IT/#modalita-duso","title":"\ud83d\udc65 Modalit\u00e0 d'Uso","text":""},{"location":"AI_INTEGRATION_IT/#1-modalita-operatore","title":"1. Modalit\u00e0 Operatore","text":"<ul> <li>Utenti Target: Baristi, Manager.</li> <li>Endpoint: <code>/api/ai/operator</code> (POST)</li> <li>Contesto: Assistente utile, focalizzato su inventario (Grocy), relazioni (Monica), e ordini (Dolibarr).</li> <li>Esempio:     <code>bash     curl -X POST http://brain.bar.lan/api/ai/operator -d '{\"prompt\": \"Come aggiungo un nuovo cliente al programma fedelt\u00e0?\"}'</code></li> </ul>"},{"location":"AI_INTEGRATION_IT/#2-modalita-sviluppatore","title":"2. Modalit\u00e0 Sviluppatore","text":"<ul> <li>Utenti Target: DevOps, Sysadmin.</li> <li>Endpoint: <code>/api/ai/dev</code> (POST)</li> <li>Contesto: Esperto tecnico, capisce Ansible, log Linux e JSON.</li> <li>Esempio:     <code>bash     curl -X POST http://brain.bar.lan/api/ai/dev -d '{\"prompt\": \"Spiega la strategia di backup in site.yml\"}'</code></li> </ul>"},{"location":"AI_INTEGRATION_IT/#cambiare-provider","title":"\ud83d\udd04 Cambiare Provider","text":"<p>Attualmente configurato per Google Gemini 1.5 Flash. Per passare a OpenAI/Ollama, modifica il nodo <code>Prepare Gemini Request</code> in Node-RED per cambiare URL API e formato payload.</p>"},{"location":"ANALYSIS_AND_FIXES/","title":"Smart Bar Cortex - Analysis &amp; Improvement Report","text":"<p>Date: 2025-12-25 Status: Optimized &amp; Verified</p>"},{"location":"ANALYSIS_AND_FIXES/#1-executive-summary","title":"1. Executive Summary","text":"<p>The Smart Bar Cortex project is in a robust state. Previous fragmentation issues caused by multi-agent development have been addressed. The infrastructure code is strictly idempotent, modular, and aligned with YunoHost best practices.</p> <p>Key Actions Taken: *   Fixed Logic Errors: Removed redundant/broken port usage in <code>setup_dev_stack</code>. *   Corrected Hooks: Fixed bash syntax errors in the persistence hook mechanism. *   Refined Idempotency: Cleaned up <code>yunohost_portal</code> tasks to ensure clean \"Check -&gt; Apply\" flow. *   Audit: Verified documentation consistency (<code>PROJECT_MANUAL_FOR_TRILIUM.md</code> confirmed active).</p>"},{"location":"ANALYSIS_AND_FIXES/#2-codebase-improvements","title":"2. Codebase Improvements","text":""},{"location":"ANALYSIS_AND_FIXES/#setup_dev_stack-role","title":"\ud83d\udd27 <code>setup_dev_stack</code> Role","text":"<ul> <li>Issue: The role attempted to push to <code>localhost:3000</code> hardcoded, then tried again with a dynamic port.</li> <li>Fix: Removed the fragile static block. The role now correctly queries YunoHost for the actual Forgejo port before attempting repository creation.</li> </ul>"},{"location":"ANALYSIS_AND_FIXES/#hooks-role","title":"\ud83e\ude9d <code>hooks</code> Role","text":"<ul> <li>Issue: A syntax error (<code>$ app</code> instead of <code>$app</code>) and missing variable assignment (<code>app=$1</code>) in the <code>post_app_upgrade</code> script would have prevented the theme from persisting after upgrades.</li> <li>Fix: corrected bash script syntax.</li> </ul>"},{"location":"ANALYSIS_AND_FIXES/#yunohost_portal-role","title":"\ud83c\udfa8 <code>yunohost_portal</code> Role","text":"<ul> <li>Issue: Redundant tasks for applying the theme.</li> <li>Fix: Simplified to a single robust check: <code>if theme != cortex then apply</code>.</li> </ul>"},{"location":"ANALYSIS_AND_FIXES/#security","title":"\ud83d\udd10 Security","text":"<ul> <li>Observation: <code>secrets.yml</code> contains plaintext passwords (<code>ChangeMe123!</code>).</li> <li>Action: Added explicit [SECURITY WARNING] comments in <code>vars.yml</code> instructing the user to encrypt this file using <code>ansible-vault</code> before production use.</li> </ul>"},{"location":"ANALYSIS_AND_FIXES/#3-project-completeness-verification","title":"3. Project Completeness Verification","text":"Component Status Notes Site.yml \u2705 Complete Orchestrates all roles correctly. Common Role \u2705 Complete Generic <code>yunohost_app</code> wrapper is reusable and clean. Dolibarr \u2705 Complete SQL Injection for webhooks verified against research. Node-RED \u2705 Complete Flows referenced in <code>assets/</code> match logic. Themes \u2705 Complete Assets for Portal and Forgejo are present. Docs \u2705 Complete <code>MANUAL_STEPS</code>, <code>ARCHITECTURE</code> and <code>TRILIUM_MANUAL</code> are consistent."},{"location":"ANALYSIS_AND_FIXES/#4-next-steps-for-user","title":"4. Next Steps for User","text":"<ol> <li>Vault Encryption:     Run: <code>ansible-vault encrypt group_vars/all/secrets.yml</code></li> <li>Inventory Setup:     Update <code>inventory/hosts.ini</code> with your real server IP.</li> <li>Deploy:     Run: <code>ansible-playbook site.yml</code></li> </ol> <p>The project is ready for deployment testing on a live YunoHost instance.</p>"},{"location":"ANALYSIS_REPORT/","title":"\ud83e\uddd0 Self-Analysis &amp; Improvement Plan","text":""},{"location":"ANALYSIS_REPORT/#analysis-of-current-solution","title":"Analysis of Current Solution","text":"Requirement Implementation Status Quality Check Gap / Risk Idempotency \u2705 Implemented High <code>yunohost app list</code> checks are robust. Logic Bridge \u2705 Implemented Medium SQL injection for Dolibarr assumes DB name is <code>dolibarr</code>. Risk: Installation might use <code>dolibarr_2</code>. Customization \u2705 Implemented Medium Theme Assets are copied once. Risk: YunoHost updates could overwrite <code>/usr/share/ssowat</code> assets. Dev Stack \u2705 Implemented High Repo creation via API is safe. Admin creation uses CLI which might vary path. Documentation \u2705 Implemented High Comprehensive."},{"location":"ANALYSIS_REPORT/#proposed-improvements-senior-architect-touches","title":"Proposed Improvements (\"Senior Architect\" Touches)","text":""},{"location":"ANALYSIS_REPORT/#1-dynamic-dolibarr-configuration","title":"1. Dynamic Dolibarr Configuration","text":"<p>Issue: Hardcoded database name <code>dolibarr</code> in <code>roles/bridge_config/tasks/main.yml</code>. Fix: Use <code>yunohost app setting dolibarr mysql_db</code> to retrieve the actual database name before running SQL queries.</p>"},{"location":"ANALYSIS_REPORT/#2-upgrade-proof-theming-persistence","title":"2. Upgrade-Proof Theming (Persistence)","text":"<p>Issue: YunoHost system updates often reset the SSOWat portal assets. Fix: Install a YunoHost Hook (<code>post_app_upgrade</code> or similar) that automatically re-applies the custom CSS after an update.</p>"},{"location":"ANALYSIS_REPORT/#3-safer-forgejo-execution","title":"3. Safer Forgejo Execution","text":"<p>Issue: Assuming <code>forgejo</code> binary path. Fix: Use <code>yunohost app shell forgejo</code> or locate binary dynamically.</p>"},{"location":"ANALYSIS_REPORT/#action-plan","title":"Action Plan","text":"<ol> <li>Refactor <code>bridge_config</code>: Add task to fetch db name.</li> <li>Create <code>hooks</code> role: Deploy a bash script to <code>/etc/yunohost/hooks.d/</code> to ensure the theme survives SWAT updates.</li> </ol>"},{"location":"ARCHITECTURE/","title":"Smart Bar Cortex Architecture","text":""},{"location":"ARCHITECTURE/#modular-design","title":"Modular Design","text":"<p>The infrastructure is built on YunoHost 12 (Debian 12) using a modular Ansible approach.</p>"},{"location":"ARCHITECTURE/#layers","title":"Layers","text":"<ol> <li> <p>Hardware/OS Layer: </p> <ul> <li>Alpha: Physical/Virtual VPS on Hetzner.</li> <li>Test: Ephemeral VMs.</li> <li>Network: Headscale (VPN) Mesh + AdGuard Home (DNS).</li> </ul> </li> <li> <p>Application Layer (YunoHost Apps):</p> <ul> <li>Managed via <code>yunohost app install</code> commands wrapped in Ansible.</li> <li>Idempotency: All tasks check <code>yunohost app list</code> JSON output before execution.</li> </ul> </li> <li> <p>Bridge Layer (Integration):</p> <ul> <li>Dolibarr -&gt; Node-RED: SQL Injection enables <code>modWebhook</code> and configures the endpoint.</li> <li>Node-RED -&gt; Telegram: NPM packages installed in user directory.</li> </ul> </li> <li> <p>Customization Layer:</p> <ul> <li>SSOWat (Portal): JSON config manipulation + Custom CSS assets.</li> <li>Forgejo: <code>app.ini</code> + Public assets folder.</li> <li>Node-RED: <code>settings.js</code> replacement.</li> </ul> </li> </ol>"},{"location":"ARCHITECTURE/#dependency-graph","title":"Dependency Graph","text":"<pre><code>graph TD\n    A[Common Role] --&gt; B[YunoHost Portal]\n    A --&gt; C[Forgejo]\n    A --&gt; D[Trilium]\n    A --&gt; E[Dolibarr]\n    A --&gt; F[Grocy]\n    A --&gt; G[NodeRED]\n    A --&gt; K[Monica]\n\n    G --&gt; H[Bridge Config]\n    E --&gt; H\n\n    G --&gt; I[SSO Security]\n    C --&gt; J[Dev Stack Setup]\n</code></pre>"},{"location":"ARCHITECTURE/#security-model","title":"Security Model","text":"<ul> <li>Public Access: Restricted by default via YunoHost SSO.</li> <li>Node-RED API: Explicitly opened to <code>visitors</code> group via <code>yunohost permission</code> for webhook reception.</li> <li>Git: Private repositories, HTTPS only.</li> </ul>"},{"location":"ARCHITECTURE/#access-control-permissions","title":"Access Control &amp; Permissions","text":"<p>We manage permissions via <code>vars.yml</code> (<code>apps.&lt;app&gt;.access</code>) and the <code>sso_security</code> role.</p> Access Level Config <code>access</code> Description Private (SSO) <code>private</code> Default. Requires YunoHost login. Public (Web) <code>public</code> Accessible to \"Visitors\" (No login). VPN Only <code>public</code>* *If domain is <code>.lan</code>, \"Public\" means any device on VPN can access without auth. <p>Note: The <code>sso_security</code> role enforces these states by adding/removing the <code>visitors</code> group from the app's permission (<code>app.main</code>).</p>"},{"location":"ARCHITECTURE_IT/","title":"Architettura Smart Bar Cortex","text":""},{"location":"ARCHITECTURE_IT/#design-modulare","title":"Design Modulare","text":"<p>L'infrastruttura \u00e8 costruita su YunoHost 12 (Debian 12) utilizzando un approccio Ansible modulare.</p>"},{"location":"ARCHITECTURE_IT/#livelli-layers","title":"Livelli (Layers)","text":"<ol> <li> <p>Livello Hardware/OS: </p> <ul> <li>Alpha: VPS Fisico/Virtuale su Hetzner.</li> <li>Test: VM effimere.</li> <li>Rete: Headscale (VPN) Mesh + AdGuard Home (DNS).</li> </ul> </li> <li> <p>Livello Applicativo (App YunoHost):</p> <ul> <li>Gestito via comandi <code>yunohost app install</code> \"wrappati\" in Ansible.</li> <li>Idempotenza: Tutti i task controllano l'output JSON di <code>yunohost app list</code> prima dell'esecuzione.</li> </ul> </li> <li> <p>Livello Bridge (Integrazione):</p> <ul> <li>Dolibarr -&gt; Node-RED: SQL Injection abilita <code>modWebhook</code> e configura l'endpoint.</li> <li>Node-RED -&gt; Telegram: Pacchetti NPM installati nella directory utente.</li> </ul> </li> <li> <p>Livello Personalizzazione:</p> <ul> <li>SSOWat (Portale): Manipolazione config JSON + Asset CSS custom.</li> <li>Forgejo: <code>app.ini</code> + Cartella asset pubblici.</li> <li>Node-RED: Sostituzione <code>settings.js</code>.</li> </ul> </li> </ol>"},{"location":"ARCHITECTURE_IT/#grafo-delle-dipendenze","title":"Grafo delle Dipendenze","text":"<pre><code>graph TD\n    A[Ruolo Common] --&gt; B[Portale YunoHost]\n    A --&gt; C[Forgejo]\n    A --&gt; D[Trilium]\n    A --&gt; E[Dolibarr]\n    A --&gt; F[Grocy]\n    A --&gt; G[NodeRED]\n    A --&gt; K[Monica]\n\n    G --&gt; H[Config Bridge]\n    E --&gt; H\n\n    G --&gt; I[Sicurezza SSO]\n    C --&gt; J[Setup Stack Dev]\n</code></pre>"},{"location":"ARCHITECTURE_IT/#modello-di-sicurezza","title":"Modello di Sicurezza","text":"<ul> <li>Accesso Pubblico: Ristretto di default via YunoHost SSO.</li> <li>API Node-RED: Aperta esplicitamente al gruppo <code>visitors</code> via <code>yunohost permission</code> per la ricezione webhook.</li> <li>Git: Repository privater, solo HTTPS.</li> </ul>"},{"location":"ARCHITECTURE_IT/#controllo-accessi-permessi","title":"Controllo Accessi &amp; Permessi","text":"<p>Gestiamo i permessi via <code>vars.yml</code> (<code>apps.&lt;app&gt;.access</code>) e il ruolo <code>sso_security</code>.</p> Livello Accesso Config <code>access</code> Descrizione Privato (SSO) <code>private</code> Default. Richiede login YunoHost. Pubblico (Web) <code>public</code> Accessibile ai \"Visitatori\" (Nessun login). Solo VPN <code>public</code>* *Se il dominio \u00e8 <code>.lan</code>, \"Pubblico\" significa che qualsiasi dispositivo in VPN accede senza auth. <p>Nota: Il ruolo <code>sso_security</code> impone questi stati aggiungendo/rimuovendo il gruppo <code>visitors</code> dai permessi dell'app (<code>app.main</code>).</p>"},{"location":"FINAL_REPORT/","title":"\ud83d\udcca Final Implementation Analysis &amp; Comparison","text":""},{"location":"FINAL_REPORT/#comparison-custom-vs-lydra-collection","title":"Comparison: Custom vs. Lydra Collection","text":"<p>We evaluated using the <code>lydra.yunohost</code> collection vs. our Custom Approach.</p> Feature Lydra Collection Smart Bar Custom Verdict App Install <code>ynh_apps</code> role Custom <code>yunohost app install</code> Custom: More control over specific arguments (SQL injections, API bypasses). Configuration Generic config Dedicated Roles (Bridge, Hooks) Custom: Essential for the specific \"AI Bridge\" logic requested. Backups Integrated logic Added <code>backup</code> role Tie: We implemented native backup calls similar to Lydra. Flexibility rigid structure customized tasks Custom: Better for this specific \"Greenfield vs Brownfield\" mixed requirement."},{"location":"FINAL_REPORT/#improvements-implemented","title":"Improvements Implemented","text":"<ol> <li> <p>Security (Ansible Vault):</p> <ul> <li>Added <code>setup_vault.sh</code> to encourage encryption of <code>group_vars/all/vars.yml</code> containing passwords and hook secrets.</li> <li>Why: Best practice to never store plain text secrets.</li> </ul> </li> <li> <p>Safety (Backup Role):</p> <ul> <li>Added <code>roles/backup</code> which triggers a full system backup before deployment if <code>enable_backup=true</code> is passed.</li> <li>Why: Prevents data loss during \"non-destructive\" updates on the Alpha instance.</li> </ul> </li> <li> <p>Maintainability (Modular Refactor):</p> <ul> <li>Refactored playbook to use tags effectively.</li> <li>Persistence Hooks ensure the theme survives.</li> </ul> </li> </ol>"},{"location":"FINAL_REPORT/#recommendations-for-future","title":"Recommendations for Future","text":"<ul> <li>CI/CD: Integrate <code>molecule</code> tests if the complexity grows.</li> <li>External Vault: Move from local <code>.vault_pass</code> to a Secret Manager (HashiCorp Vault) if scaling to multiple teams.</li> </ul>"},{"location":"MANUAL_STEPS/","title":"Manual Customization Steps","text":"<p>While Ansible automates 95% of the infrastructure, some application-specific customizations require manual intervention due to internal database structures or lack of CLI APIs.</p>"},{"location":"MANUAL_STEPS/#trilium-notes-custom-theme","title":"Trilium Notes - Custom Theme","text":"<p>Trilium uses an internal \"Note\" system for themes. We cannot easily inject this via SQL without risking database corruption.</p>"},{"location":"MANUAL_STEPS/#steps-to-apply-smart-bar-dark","title":"Steps to Apply \"Smart Bar Dark\":","text":"<ol> <li>Login to your Trilium instance (e.g., <code>https://wiki.bar.lan</code>).</li> <li>Create a New Note:<ul> <li>Title: <code>SmartBarTheme</code></li> <li>Type: <code>Code</code> (Select \"CSS\" from the dropdown in the editor).</li> </ul> </li> <li>Add Attributes (Top right \"Attributes\" panel):<ul> <li>Add label: <code>#appTheme</code></li> <li>Value for label: <code>smartbar</code></li> </ul> </li> <li>Paste CSS Content:     Copy the content below into the note:</li> </ol> <pre><code>:root {\n    --main-background-color: #0f0f1b;\n    --main-text-color: #e0e0e0;\n    --left-pane-background-color: #16213e;\n    --left-pane-text-color: #e0e0e0;\n    --accent-color: #00d2ff;\n}\n\nbody {\n    background-color: var(--main-background-color);\n    color: var(--main-text-color);\n}\n\n.tree-node:hover {\n    background-color: #1a1a2e;\n}\n\n.ribbon-tab-title.active {\n    border-bottom: 2px solid var(--accent-color);\n}\n</code></pre> <ol> <li>Activate:<ul> <li>Go to Options (Menu top left) -&gt; Appearance.</li> <li>Select <code>smartbar</code> from the Theme dropdown.</li> <li>Reload the page.</li> </ul> </li> </ol>"},{"location":"MANUAL_STEPS/#steps-to-publish-project-guide","title":"Steps to Publish \"Project Guide\":","text":"<ol> <li>Create a Root Note:<ul> <li>Title: <code>Smart Bar Guide</code></li> <li>Content: Copy/Paste content from <code>docs/PROJECT_MANUAL_FOR_TRILIUM.md</code>.</li> </ul> </li> <li>Enable Public Access:<ul> <li>Click the \"Share\" icon (top right) or \"Attributes\".</li> <li>Add attribute: <code>promoted</code> (Promote to public site) or toggle \"Share this note\" switch.</li> <li>(Optional) Set a \"Custom URL alias\" like <code>guide</code>.</li> </ul> </li> <li>Verify:<ul> <li>Visit <code>https://wiki.bar.lan/share/guide</code> (or your equivalent public URL).</li> </ul> </li> </ol>"},{"location":"MANUAL_STEPS/#grocy-dark-mode","title":"Grocy - Dark Mode","text":"<p>Grocy has a built-in Dark Mode setting per user. 1.  Login as admin. 2.  Go to User Settings (Top right wrench icon). 3.  Check \"Dark Mode\".</p>"},{"location":"MANUAL_STEPS_IT/","title":"Passaggi di Personalizzazione Manuale","text":"<p>Mentre Ansible automatizza il 95% dell'infrastruttura, alcune personalizzazioni specifiche richiedono un intervento manuale a causa di strutture database interne o mancanza di API CLI.</p>"},{"location":"MANUAL_STEPS_IT/#trilium-notes-tema-personalizzato","title":"Trilium Notes - Tema Personalizzato","text":"<p>Trilium usa un sistema interno di \"Note\" per i temi. Non possiamo iniettarli facilmente via SQL senza rischiare la corruzione del DB.</p>"},{"location":"MANUAL_STEPS_IT/#passaggi-per-applicare-smart-bar-dark","title":"Passaggi per applicare \"Smart Bar Dark\":","text":"<ol> <li>Login alla tua istanza Trilium (es. <code>https://wiki.bar.lan</code>).</li> <li>Crea una Nuova Nota:<ul> <li>Titolo: <code>SmartBarTheme</code></li> <li>Tipo: <code>Code</code> (Seleziona \"CSS\" dal menu a tendina nell'editor).</li> </ul> </li> <li>Aggiungi Attributi (Pannello \"Attributes\" in alto a destra):<ul> <li>Aggiungi etichetta: <code>#appTheme</code></li> <li>Valore per etichetta: <code>smartbar</code></li> </ul> </li> <li>Incolla Contenuto CSS:     Copia il contenuto qui sotto nella nota:</li> </ol> <pre><code>:root {\n    --main-background-color: #0f0f1b;\n    --main-text-color: #e0e0e0;\n    --left-pane-background-color: #16213e;\n    --left-pane-text-color: #e0e0e0;\n    --accent-color: #00d2ff;\n}\n\nbody {\n    background-color: var(--main-background-color);\n    color: var(--main-text-color);\n}\n\n.tree-node:hover {\n    background-color: #1a1a2e;\n}\n\n.ribbon-tab-title.active {\n    border-bottom: 2px solid var(--accent-color);\n}\n</code></pre> <ol> <li>Attiva:<ul> <li>Vai su Options (Menu in alto a sinistra) -&gt; Appearance.</li> <li>Seleziona <code>smartbar</code> dal menu a tendina Theme.</li> <li>Ricarica la pagina.</li> </ul> </li> </ol>"},{"location":"MANUAL_STEPS_IT/#passaggi-per-pubblicare-project-guide","title":"Passaggi per Pubblicare \"Project Guide\":","text":"<ol> <li>Crea una Nota Root:<ul> <li>Titolo: <code>Smart Bar Guide</code></li> <li>Contenuto: Copia/Incolla contenuto da <code>docs/PROJECT_MANUAL_FOR_TRILIUM.md</code>.</li> </ul> </li> <li>Abilita Accesso Pubblico:<ul> <li>Clicca l'icona \"Share\" (in alto a destra) o \"Attributes\".</li> <li>Aggiungi attributo: <code>promoted</code> (Promuovi a sito pubblico) o attiva l'interruttore \"Share this note\".</li> <li>(Opzionale) Imposta un \"Custom URL alias\" come <code>guide</code>.</li> </ul> </li> <li>Verifica:<ul> <li>Visita <code>https://wiki.bar.lan/share/guide</code> (o il tuo URL pubblico equivalente).</li> </ul> </li> </ol>"},{"location":"MANUAL_STEPS_IT/#grocy-dark-mode","title":"Grocy - Dark Mode","text":"<p>Grocy ha un'impostazione Dark Mode integrata per utente. 1.  Login come admin. 2.  Vai su User Settings (Icona chiave inglese in alto a destra). 3.  Spunta \"Dark Mode\".</p>"},{"location":"PROJECT_MANUAL_FOR_TRILIUM/","title":"\ud83d\udcd8 Smart Bar AI-Stack: The Complete Guide","text":"<p>Note: This document is auto-generated for import into Trilium Notes. It combines the Architecture, Usage, and Maintenance guides.</p>"},{"location":"PROJECT_MANUAL_FOR_TRILIUM/#part-1-architecture","title":"\ud83c\udfd7\ufe0f Part 1: Architecture","text":"<p>The Smart Bar infrastructure is built on YunoHost 12, leveraging Ansible for 'Infrastructure as Code' (IaC).</p>"},{"location":"PROJECT_MANUAL_FOR_TRILIUM/#core-components","title":"Core Components","text":"<ul> <li>Forgejo: Private Git server for code versioning.</li> <li>Dolibarr: ERP system for sales and inventory logic.</li> <li>Trilium: Knowledge Base (this system).</li> <li>Node-RED: The \"AI Brain\" connecting Dolibarr events to automation.</li> <li>Headscale: VPN Mesh for secure internal access.</li> </ul>"},{"location":"PROJECT_MANUAL_FOR_TRILIUM/#access-control-matrix","title":"Access Control Matrix","text":"Access Type Description Private Requires Login. (Default for ERP, Node-RED, Grocy) VPN-Public Accessible without login only if inside the VPN. Public Accessible to the open web (if port forwarded). <p>Note: Permissions are managed in <code>group_vars/all/vars.yml</code> via the <code>access: public/private</code> key.</p>"},{"location":"PROJECT_MANUAL_FOR_TRILIUM/#integration-flow","title":"Integration Flow","text":"<ol> <li>Event: A product is updated in Dolibarr.</li> <li>Trigger: Dolibarr fires a Webhook (SQL injected config).</li> <li>Processing: Node-RED receives the hook at <code>https://brain.bar.lan/api/doli-webhook</code>.</li> <li>Action: Node-RED processes the data (AI RAG or Telegram alert).</li> </ol>"},{"location":"PROJECT_MANUAL_FOR_TRILIUM/#part-2-deployment-recovery","title":"\ud83d\ude80 Part 2: Deployment &amp; Recovery","text":""},{"location":"PROJECT_MANUAL_FOR_TRILIUM/#deploying-from-scratch","title":"Deploying from Scratch","text":"<p>Run the Ansible playbook from your control node:</p> <pre><code>ansible-playbook site.yml\n</code></pre>"},{"location":"PROJECT_MANUAL_FOR_TRILIUM/#updates-maintenance","title":"Updates &amp; Maintenance","text":"<ul> <li>Update Themes: <code>ansible-playbook site.yml --tags \"theme\"</code></li> <li>Verify Backups: Check <code>/home/yunohost.backup/archives/</code> before major changes.</li> <li>** Disaster Recovery**: Use the <code>roles/backup</code> tag to create snapshots.</li> </ul>"},{"location":"PROJECT_MANUAL_FOR_TRILIUM/#part-3-customization","title":"\ud83c\udfa8 Part 3: Customization","text":""},{"location":"PROJECT_MANUAL_FOR_TRILIUM/#themes","title":"Themes","text":"<p>We use a custom \"Neon/Cyberpunk\" aesthetic. *   Portal: CSS injected via <code>hooks</code> into SSOWat assets. *   Trilium: Use the <code>SmartBarTheme</code> note (CSS).</p>"},{"location":"PROJECT_MANUAL_FOR_TRILIUM/#manual-configurations","title":"Manual configurations","text":"<p>Some settings cannot be automated safely: 1.  Trilium Public Share: You are reading this! This note must be set to \"Shared\" in Trilium attributes. 2.  Grocy Dark Mode: Enable in User Settings.</p>"},{"location":"PROJECT_MANUAL_FOR_TRILIUM/#part-4-troubleshooting","title":"\u2753 Part 4: Troubleshooting","text":"<ul> <li>VPN Issues: Check <code>headscale</code> status on the Alpha node.</li> <li>Webhooks: Verify Dolibarr <code>llx_webhook</code> table if events rely on it.</li> <li>Ansible Vault: If variables are encrypted, use <code>--ask-vault-pass</code>.</li> </ul>"},{"location":"PUBLISHING/","title":"Publishing Documentation to GitHub Pages","text":"<p>This documentation is built with MkDocs. You can host it for free on GitHub Pages.</p>"},{"location":"PUBLISHING/#prerequisites","title":"Prerequisites","text":"<ul> <li>A GitHub repository.</li> <li>Admin permissions on the repo (to enable Pages).</li> </ul>"},{"location":"PUBLISHING/#automatic-method-github-actions","title":"Automatic Method (GitHub Actions)","text":"<ol> <li>Create a file <code>.github/workflows/docs.yml</code> in your repository with the following content:</li> </ol> <pre><code>name: Publish Docs\non:\n  push:\n    branches:\n      - main\npermissions:\n  contents: write\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-python@v4\n        with:\n          python-version: 3.x\n      - run: pip install mkdocs-material\n      - run: mkdocs gh-deploy --force\n</code></pre> <ol> <li>Push this file to your <code>main</code> branch.</li> <li>Go to GitHub &gt; Settings &gt; Pages.</li> <li>Ensure \"Source\" is set to the <code>gh-pages</code> branch (it will be created automatically by the workflow).</li> </ol>"},{"location":"PUBLISHING/#manual-method","title":"Manual Method","text":"<p>If you have Python installed locally:</p> <ol> <li>Install MkDocs and Material theme:     <code>bash     pip install mkdocs-material</code></li> <li>Build and deploy:     <code>bash     mkdocs gh-deploy</code></li> </ol> <p>Your site will be live at <code>https://&lt;your-username&gt;.github.io/&lt;repo-name&gt;/</code>.</p>"},{"location":"PUBLISHING_IT/","title":"Pubblicare la Documentazione su GitHub Pages","text":"<p>Questa documentazione \u00e8 costruita con MkDocs. Puoi pubblicarla gratuitamente su GitHub Pages.</p>"},{"location":"PUBLISHING_IT/#prerequisiti","title":"Prerequisiti","text":"<ul> <li>Una repository GitHub.</li> <li>Permessi di amministrazione sulla repo (per attivare Pages).</li> </ul>"},{"location":"PUBLISHING_IT/#metodo-automatico-github-actions","title":"Metodo Automatico (GitHub Actions)","text":"<ol> <li>Crea un file <code>.github/workflows/docs.yml</code> nella tua repository con questo contenuto:</li> </ol> <pre><code>name: Publish Docs\non:\n  push:\n    branches:\n      - main\npermissions:\n  contents: write\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-python@v4\n        with:\n          python-version: 3.x\n      - run: pip install mkdocs-material\n      - run: mkdocs gh-deploy --force\n</code></pre> <ol> <li>Pusha il file sulla branch <code>main</code>.</li> <li>Vai su GitHub &gt; Settings &gt; Pages.</li> <li>Assicurati che \"Source\" sia impostato su <code>gh-pages</code> branch (verr\u00e0 creata automaticamente dal workflow).</li> </ol>"},{"location":"PUBLISHING_IT/#metodo-manuale","title":"Metodo Manuale","text":"<p>Se hai Python installato localmente:</p> <ol> <li>Installa MkDocs e il tema Material:     <code>bash     pip install mkdocs-material</code></li> <li>Costruisci e deploya:     <code>bash     mkdocs gh-deploy</code></li> </ol> <p>Il tuo sito sar\u00e0 visibile su <code>https://&lt;tuo-username&gt;.github.io/&lt;nome-repo&gt;/</code>.</p>"},{"location":"TESTING/","title":"Testing Strategy &amp; Workflows","text":"<p>This project is designed to be flexible, supporting both \"Greenfield\" (clean install) and \"Brownfield\" (existing server) deployments.</p>"},{"location":"TESTING/#1-context-the-intranet-stack","title":"1. Context: The \"Intranet\" Stack","text":"<p>We assume many users (like yourself) are running the Headscale + AdGuard + YunoHost stack described in this community guide.</p> <p>Compatibility Confirmation: *   This Ansible playbook operates primarily at the Application Layer (installing apps, configuring themes). *   It does NOT modify your <code>wg0</code> interface, Headscale routes, or AdGuard DNS settings. *   Safe to Run: It is perfectly safe to run this playbook on your existing \"Intranet\" VPS, provided you follow the safety steps below.</p>"},{"location":"TESTING/#2-testing-scenarios","title":"2. Testing Scenarios","text":""},{"location":"TESTING/#scenario-a-non-destructive-test-existing-vps","title":"Scenario A: Non-Destructive Test (Existing VPS)","text":"<p>You have a running production/lab VPS and want to add the Smart Bar features without breaking it.</p> <p>Safety Protocol: 1.  Provider Snapshot (Highly Recommended):     Before running Ansible, go to your VPS provider console (e.g., Hetzner Cloud Console) and take a Snapshot of the server.     *   Why? If Ansible breaks something, you can revert the entire disk state in minutes.     *   Cost: Usually pennies for the few hours you keep it. 2.  YunoHost Backup (Application Level):     If you can't snapshot, create a local backup:     <code>bash     yunohost backup create --system --apps</code> 3.  Run Ansible:     <code>bash     ansible-playbook site.yml --tags \"apps,theme\"</code>     *   Tip: Use tags to limit scope initially.</p>"},{"location":"TESTING/#scenario-b-clean-slate-test-hetzner-ephemeral","title":"Scenario B: Clean Slate Test (Hetzner Ephemeral)","text":"<p>To rigorously test the full bootstrap process without risk to your main server.</p> <p>Workflow: 1.  Spin up a new VPS (e.g., CX22 instance on Hetzner).     *   Cost Strategy: Hetzner bills hourly. A test run of 2 hours costs &lt; $0.02. 2.  Install YunoHost:     <code>bash     curl https://install.yunohost.org | bash</code> (Skip post-install wizard if you want to automate it, or complete it quickly via web). 3.  Configure Ansible Inventory:     Add the new IP to <code>inventory/hosts.ini</code> under a <code>[test]</code> group. 4.  Run Full Playbook:     <code>bash     ansible-playbook site.yml -i inventory/hosts.ini --limit test</code> 5.  Destroy:     Delete the server immediately after testing to stop billing.</p>"},{"location":"TESTING/#3-backup-restore-strategies","title":"3. Backup &amp; Restore Strategies","text":""},{"location":"TESTING/#for-state-preservation","title":"For State Preservation","text":"<p>If you want to \"freeze\" your current VPS state to try something experimental and then return:</p> <p>Method 1: The \"Fork\" (Snapshot &amp; Restore) 1.  Power down your main VPS. 2.  Take a Snapshot. 3.  \"Create Server\" from that Snapshot (Clone). 4.  Test on the Clone. 5.  If successful, apply changes to Main. If failed, delete Clone.</p> <p>Method 2: YunoHost Archives Useful if you want to move the \"Smart Bar\" configuration to a new server. 1.  Backup:     <code>bash     yunohost backup create --apps forgejo,trilium,nodered,dolibarr --label pre-smartbar-test</code> 2.  Download:     <code>scp admin@your-ip:/home/yunohost.backup/archives/pre-smartbar-test.tar .</code> 3.  Restore (on target):     <code>yunohost backup restore pre-smartbar-test</code></p>"},{"location":"TESTING/#4-troubleshooting-intranet-conflicts","title":"4. Troubleshooting Intranet Conflicts","text":"<p>If you use the VPN domain (e.g., <code>vpn.bar.lan</code>) for apps: *   Ensure variables in <code>group_vars/all/vars.yml</code> match your Headscale DNS records. *   If Ansible fails to resolve domains, add the IP mappings to your local <code>/etc/hosts</code> temporarily or use the <code>ansible_host</code> inventory variable.</p>"},{"location":"TESTING_IT/","title":"Strategie di Testing &amp; Workflow","text":"<p>Questo progetto \u00e8 progettato per essere flessibile, supportando sia deployment \"Greenfield\" (nuova installazione) che \"Brownfield\" (server esistente).</p>"},{"location":"TESTING_IT/#1-contesto-lo-stack-intranet","title":"1. Contesto: Lo Stack \"Intranet\"","text":"<p>Assumiamo che molti utenti (come te) stiano eseguendo lo stack Headscale + AdGuard + YunoHost descritto in questa guida della community.</p> <p>Conferma Compatibilit\u00e0: *   Questo playbook Ansible opera principalmente a Livello Applicativo (installazione app, configurazione temi). *   NON modifica la tua interfaccia <code>wg0</code>, le rotte Headscale o le impostazioni DNS AdGuard. *   Sicuro da eseguire: \u00c8 perfettamente sicuro lanciare questo playbook sul tuo VPS \"Intranet\" esistente, a patto di seguire i passaggi di sicurezza qui sotto.</p>"},{"location":"TESTING_IT/#2-scenari-di-test","title":"2. Scenari di Test","text":""},{"location":"TESTING_IT/#scenario-a-test-non-distruttivo-vps-esistente","title":"Scenario A: Test Non Distruttivo (VPS Esistente)","text":"<p>Hai un VPS di produzione/lab funzionante e vuoi aggiungere le funzionalit\u00e0 Smart Bar senza romperlo.</p> <p>Protocollo di Sicurezza: 1.  Snapshot del Provider (Altamente Raccomandato):     Prima di lanciare Ansible, vai nella console del tuo provider (es. Hetzner Cloud Console) e fai uno Snapshot del server.     *   Perch\u00e9? Se Ansible rompe qualcosa, puoi revertire l'intero stato del disco in pochi minuti.     *   Costo: Solitamente pochi centesimi per le ore in cui lo mantieni. 2.  Backup YunoHost (Livello App):     Se non puoi fare snapshot, crea un backup locale:     <code>bash     yunohost backup create --system --apps</code> 3.  Lancia Ansible:     <code>bash     ansible-playbook site.yml --tags \"apps,theme\"</code>     *   Suggerimento: Usa i tag per limitare lo scopo inizialmente.</p>"},{"location":"TESTING_IT/#scenario-b-test-pulito-hetzner-effimero","title":"Scenario B: Test Pulito (Hetzner Effimero)","text":"<p>Per testare rigorosamente il processo di bootstrap completo senza rischi per il tuo server principale.</p> <p>Workflow: 1.  Crea un nuovo VPS (es. istanza CX22 su Hetzner).     *   Strategia Costi: Hetzner fattura a ore. Un test di 2 ore costa &lt; $0.02. 2.  Installa YunoHost:     <code>bash     curl https://install.yunohost.org | bash</code> (Salta il wizard post-install se vuoi automatizzarlo, o completalo velocemente via web). 3.  Configura Inventory Ansible:     Aggiungi il nuovo IP a <code>inventory/hosts.ini</code> sotto un gruppo <code>[test]</code>. 4.  Esegui Playbook Completo:     <code>bash     ansible-playbook site.yml -i inventory/hosts.ini --limit test</code> 5.  Distruggi:     Cancella il server immediatamente dopo il test per fermare la fatturazione.</p>"},{"location":"TESTING_IT/#3-strategie-di-backup-ripristino","title":"3. Strategie di Backup &amp; Ripristino","text":""},{"location":"TESTING_IT/#per-preservare-lo-stato","title":"Per Preservare lo Stato","text":"<p>Se vuoi \"congelare\" lo stato del tuo VPS attuale per provare qualcosa di sperimentale e poi tornare indietro:</p> <p>Metodo 1: Il \"Fork\" (Snapshot &amp; Restore) 1.  Spegni il tuo VPS principale. 2.  Fai uno Snapshot. 3.  \"Create Server\" da quello Snapshot (Clone). 4.  Testa sul Clone. 5.  Se successo, applica le modifiche al Main. Se fallito, cancella il Clone.</p> <p>Metodo 2: Archivi YunoHost Utile se vuoi spostare la configurazione \"Smart Bar\" su un nuovo server. 1.  Backup:     <code>bash     yunohost backup create --apps forgejo,trilium,nodered,dolibarr --label pre-smartbar-test</code> 2.  Download:     <code>scp admin@tuo-ip:/home/yunohost.backup/archives/pre-smartbar-test.tar .</code> 3.  Restore (su target):     <code>yunohost backup restore pre-smartbar-test</code></p>"},{"location":"TESTING_IT/#4-risoluzione-conflitti-intranet","title":"4. Risoluzione Conflitti Intranet","text":"<p>Se usi il dominio VPN (es. <code>vpn.bar.lan</code>) per le app: *   Assicurati che le variabili in <code>group_vars/all/vars.yml</code> corrispondano ai record DNS Headscale. *   Se Ansible fallisce a risolvere i domini, aggiungi i mapping IP al tuo <code>/etc/hosts</code> locale temporaneamente o usa la variabile <code>ansible_host</code> nell'inventory.</p>"},{"location":"TROUBLESHOOTING/","title":"\ud83d\udd27 Troubleshooting Guide","text":""},{"location":"TROUBLESHOOTING/#common-deployment-issues","title":"Common Deployment Issues","text":""},{"location":"TROUBLESHOOTING/#1-ansible-permission-denied","title":"1. Ansible \"Permission Denied\"","text":"<p>Symptom: Ansible fails to connect to the host. Fix: *   Ensure your SSH key is added: <code>ssh-add ~/.ssh/id_rsa</code>. *   Verify you can SSH manually: <code>ssh admin@your-domain.lan</code>. *   Check <code>ansible.cfg</code> points to the correct private key if not default.</p>"},{"location":"TROUBLESHOOTING/#2-app-already-installed-idempotency","title":"2. \"App already installed\" (Idempotency)","text":"<p>Symptom: Playbook fails on app installation. Fix: *   The roles use <code>yunohost app list</code> to check status. *   If checking fails, ensure the user has sudo rights. *   Try running with <code>-vvv</code> to see the JSON output of the check.</p>"},{"location":"TROUBLESHOOTING/#3-dolibarr-webhooks-not-firing","title":"3. Dolibarr Webhooks Not Firing","text":"<p>Symptom: Update in Dolibarr doesn't trigger Node-RED. Fix: *   Check Dolibarr logs: <code>Home &gt; Admin Tools &gt; Logs</code>. *   Verify the module is enabled in <code>Home &gt; Setup &gt; Modules</code>. *   Manually test the Node-RED endpoint:     <code>bash     curl -X POST https://brain.bar.lan/api/doli-webhook -d '{\"test\":true}'</code> *   Re-run the bridge tag: <code>ansible-playbook site.yml --tags \"bridge\"</code></p>"},{"location":"TROUBLESHOOTING/#4-custom-theme-not-appearing","title":"4. Custom Theme Not Appearing","text":"<p>Symptom: Portal looks like default. Fix: *   Clear browser cache (Ctrl+F5). *   Verify <code>/etc/ssowat/conf.json.persistent</code> contains <code>\"theme\": \"smartbar\"</code>. *   Restart SSOwat/Nginx: <code>sudo systemctl restart nginx</code>.</p>"},{"location":"TROUBLESHOOTING/#ssowat-portal-specifics","title":"SSOWat / Portal Specifics","text":"<p>If the \"Neon\" theme blocks login box: *   Edit <code>/usr/share/ssowat/portal/assets/themes/smartbar/custom_portal.css</code>. *   Ensure <code>.sso-panel</code> z-index is positive.</p>"},{"location":"TROUBLESHOOTING/#node-red-502-bad-gateway","title":"Node-RED \"502 Bad Gateway\"","text":"<ul> <li>Common on fresh installs. Wait 30-60s for Node-RED service to fully boot.</li> <li>Check logs: <code>journalctl -u nodered -f</code>.</li> </ul>"},{"location":"TROUBLESHOOTING_IT/","title":"\ud83d\udd27 Guida Risoluzione Problemi (Troubleshooting)","text":""},{"location":"TROUBLESHOOTING_IT/#problemi-comuni-di-deployment","title":"Problemi Comuni di Deployment","text":""},{"location":"TROUBLESHOOTING_IT/#1-ansible-permission-denied","title":"1. Ansible \"Permission Denied\"","text":"<p>Sintomo: Ansible fallisce la connessione all'host. Soluzione: *   Assicurati che la chiave SSH sia aggiunta: <code>ssh-add ~/.ssh/id_rsa</code>. *   Verifica di poter accedere via SSH manualmente: <code>ssh admin@tuo-dominio.lan</code>. *   Controlla che <code>ansible.cfg</code> punti alla chiave privata corretta se non \u00e8 quella di default.</p>"},{"location":"TROUBLESHOOTING_IT/#2-app-already-installed-idempotenza","title":"2. \"App already installed\" (Idempotenza)","text":"<p>Sintomo: Il playbook fallisce sull'installazione app. Soluzione: *   I ruoli usano <code>yunohost app list</code> per controllare lo stato. *   Se il controllo fallisce, assicurati che l'utente abbia permessi sudo. *   Prova a eseguire con <code>-vvv</code> per vedere l'output JSON del controllo.</p>"},{"location":"TROUBLESHOOTING_IT/#3-webhook-dolibarr-non-partono","title":"3. Webhook Dolibarr non partono","text":"<p>Sintomo: Aggiornamenti in Dolibarr non attivano Node-RED. Soluzione: *   Controlla i log Dolibarr: <code>Home &gt; Strumenti Admin &gt; Log</code>. *   Verifica che il modulo sia abilitato in <code>Home &gt; Setup &gt; Moduli</code>. *   Testa manualmente l'endpoint Node-RED:     <code>bash     curl -X POST https://brain.bar.lan/api/doli-webhook -d '{\"test\":true}'</code> *   Rilancia il tag bridge: <code>ansible-playbook site.yml --tags \"bridge\"</code></p>"},{"location":"TROUBLESHOOTING_IT/#4-tema-custom-non-appare","title":"4. Tema Custom non appare","text":"<p>Sintomo: Il portale appare con il tema di default. Soluzione: *   Pulisci cache browser (Ctrl+F5). *   Verifica che <code>/etc/ssowat/conf.json.persistent</code> contenga <code>\"theme\": \"smartbar\"</code>. *   Riavvia SSOwat/Nginx: <code>sudo systemctl restart nginx</code>.</p>"},{"location":"TROUBLESHOOTING_IT/#specifiche-ssowat-portale","title":"Specifiche SSOWat / Portale","text":"<p>Se il tema \"Neon\" blocca il box di login: *   Modifica <code>/usr/share/ssowat/portal/assets/themes/smartbar/custom_portal.css</code>. *   Assicurati che lo z-index di <code>.sso-panel</code> sia positivo.</p>"},{"location":"TROUBLESHOOTING_IT/#node-red-502-bad-gateway","title":"Node-RED \"502 Bad Gateway\"","text":"<ul> <li>Comune su installazioni fresche. Attendi 30-60s affinch\u00e9 il servizio Node-RED si avvii completamente.</li> <li>Controlla log: <code>journalctl -u nodered -f</code>.</li> </ul>"},{"location":"index_it/","title":"Smart Bar Cortex Documentazione","text":"<p>Benvenuto nella documentazione del progetto Smart Bar AI-Infra.</p>"},{"location":"index_it/#panoramica","title":"Panoramica","text":"<p>Questo progetto gestisce il deployment di un ecosistema YunoHost che include: - Forgejo (Git) - Node-RED (Logica/AI) - Trilium (Note/Wiki) - ... e altro.</p>"},{"location":"index_it/#navigazione","title":"Navigazione","text":"<ul> <li>Architettura: Approfondimento tecnico.</li> <li>Passaggi Manuali: Cose che Ansible non pu\u00f2 ancora fare.</li> <li>Integrazione AI: Guida all'uso del Gateway AI.</li> <li>Risoluzione Problemi: Guida ai problemi comuni.</li> </ul>"}]}